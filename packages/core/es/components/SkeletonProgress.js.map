{"version":3,"file":"SkeletonProgress.js","sources":["../../src/components/SkeletonProgress.ts"],"sourcesContent":["import { SkeletonProgressOptions } from '../types';\nimport { ProgressBase } from '../base';\nimport { createElement, toPx } from '../utils';\n\n/**\n * SkeletonProgress - 骨架屏进度条\n */\nexport class SkeletonProgress extends ProgressBase<SkeletonProgressOptions> {\n  private wrapper!: HTMLElement;\n  private track!: HTMLElement;\n  private shimmer!: HTMLElement;\n  private textElement?: HTMLElement;\n\n  protected getDefaultOptions(): Partial<SkeletonProgressOptions> {\n    return {\n      ...super.getDefaultOptions(),\n      width: 300,\n      height: 20,\n      shimmerSpeed: 1.5,\n      baseColor: '#e4e7ed',\n      shimmerColor: '#f5f7fa',\n      showShimmer: true,\n    };\n  }\n\n  protected render(): void {\n    this.container.innerHTML = '';\n\n    const width = this.config.get('width') ?? 300;\n    const height = this.config.get('height') ?? 20;\n\n    // 创建包装器\n    this.wrapper = createElement('div', 'ld-progress-skeleton', this.container);\n    this.wrapper.style.width = toPx(width);\n    this.wrapper.style.height = toPx(height);\n    this.wrapper.style.position = 'relative';\n    this.wrapper.style.overflow = 'hidden';\n    this.wrapper.style.borderRadius = '4px';\n\n    const className = this.config.get('className');\n    if (className) {\n      this.wrapper.classList.add(className);\n    }\n\n    // 创建轨道\n    this.track = createElement('div', 'ld-progress-skeleton__track', this.wrapper);\n    this.track.style.width = '100%';\n    this.track.style.height = '100%';\n    this.track.style.backgroundColor = this.config.get('baseColor') || '#e4e7ed';\n    this.track.style.position = 'relative';\n\n    // 创建闪光效果\n    if (this.config.get('showShimmer')) {\n      this.shimmer = createElement('div', 'ld-progress-skeleton__shimmer', this.track);\n      this.shimmer.style.position = 'absolute';\n      this.shimmer.style.top = '0';\n      this.shimmer.style.left = '-100%';\n      this.shimmer.style.width = '100%';\n      this.shimmer.style.height = '100%';\n\n      const shimmerColor = this.config.get('shimmerColor') || '#f5f7fa';\n      this.shimmer.style.background = `linear-gradient(\n        90deg,\n        transparent,\n        ${shimmerColor},\n        transparent\n      )`;\n\n      const shimmerSpeed = this.config.get('shimmerSpeed') ?? 1.5;\n      this.shimmer.style.animation = `skeleton-shimmer ${shimmerSpeed}s infinite`;\n    }\n\n    // 创建文本\n    if (this.config.get('showText')) {\n      this.textElement = createElement('div', 'ld-progress-skeleton__text', this.wrapper);\n      this.textElement.style.position = 'absolute';\n      this.textElement.style.right = '10px';\n      this.textElement.style.top = '50%';\n      this.textElement.style.transform = 'translateY(-50%)';\n      this.textElement.style.fontSize = '12px';\n      this.textElement.style.color = '#606266';\n    }\n\n    this.updateProgress(this.currentValue);\n  }\n\n  protected updateProgress(value: number): void {\n    const percentage = this.config.getPercentage(value);\n\n    // 根据进度调整透明度\n    if (this.track) {\n      const alpha = 1 - percentage / 100;\n      this.track.style.opacity = String(Math.max(0.3, alpha));\n    }\n\n    // 更新文本\n    if (this.textElement) {\n      this.textElement.textContent = this.formatText(value);\n\n      // 完成时隐藏\n      if (percentage >= 100) {\n        this.textElement.textContent = '加载完成';\n        this.wrapper.style.opacity = '0';\n        setTimeout(() => {\n          if (this.wrapper) {\n            this.wrapper.style.display = 'none';\n          }\n        }, 300);\n      }\n    }\n  }\n}\n\n\n\n"],"names":[],"mappings":"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"}