{"version":3,"file":"GradientFlowProgress.js","sources":["../../src/components/GradientFlowProgress.ts"],"sourcesContent":["import { GradientFlowProgressOptions } from '../types';\nimport { ProgressBase } from '../base';\nimport { createElement, toPx } from '../utils';\n\n/**\n * GradientFlowProgress - 渐变流动进度条\n */\nexport class GradientFlowProgress extends ProgressBase<GradientFlowProgressOptions> {\n  private wrapper!: HTMLElement;\n  private bar!: HTMLElement;\n  private textElement?: HTMLElement;\n  private animationId?: string;\n  private gradientOffset: number = 0;\n\n  protected getDefaultOptions(): Partial<GradientFlowProgressOptions> {\n    return {\n      ...super.getDefaultOptions(),\n      width: 300,\n      height: 20,\n      flowSpeed: 0.5,\n      gradientColors: ['#ff0080', '#ff8c00', '#40e0d0', '#ff0080'],\n    };\n  }\n\n  protected render(): void {\n    this.container.innerHTML = '';\n\n    const width = this.config.get('width') ?? 300;\n    const height = this.config.get('height') ?? 20;\n\n    // 创建包装器\n    this.wrapper = createElement('div', 'ld-progress-gradient-flow', this.container);\n    this.wrapper.style.width = toPx(width);\n    this.wrapper.style.height = toPx(height);\n    this.wrapper.style.position = 'relative';\n    this.wrapper.style.backgroundColor = '#e4e7ed';\n    this.wrapper.style.borderRadius = `${height}px`;\n    this.wrapper.style.overflow = 'hidden';\n\n    const className = this.config.get('className');\n    if (className) {\n      this.wrapper.classList.add(className);\n    }\n\n    // 创建进度条\n    this.bar = createElement('div', 'ld-progress-gradient-flow__bar', this.wrapper);\n    this.bar.style.position = 'absolute';\n    this.bar.style.left = '0';\n    this.bar.style.top = '0';\n    this.bar.style.height = '100%';\n    this.bar.style.borderRadius = 'inherit';\n    this.bar.style.transition = 'width 0.3s ease';\n\n    // 创建流动渐变\n    const colors = this.config.get('gradientColors') || [\n      '#ff0080',\n      '#ff8c00',\n      '#40e0d0',\n      '#ff0080',\n    ];\n\n    this.bar.style.backgroundImage = `linear-gradient(90deg, ${colors.join(', ')})`;\n    this.bar.style.backgroundSize = '200% 100%';\n\n    // 创建文本\n    if (this.config.get('showText')) {\n      this.textElement = createElement('div', 'ld-progress-gradient-flow__text', this.wrapper);\n      this.textElement.style.position = 'absolute';\n      this.textElement.style.right = '15px';\n      this.textElement.style.top = '50%';\n      this.textElement.style.transform = 'translateY(-50%)';\n      this.textElement.style.color = 'white';\n      this.textElement.style.fontWeight = 'bold';\n      this.textElement.style.fontSize = '12px';\n      this.textElement.style.zIndex = '10';\n      this.textElement.style.textShadow = '0 1px 2px rgba(0, 0, 0, 0.3)';\n    }\n\n    this.startAnimation();\n    this.updateProgress(this.currentValue);\n  }\n\n  /**\n   * 开始动画\n   */\n  private startAnimation(): void {\n    if (this.animationId) return;\n\n    const { rafController } = require('../utils/RAFController');\n    this.animationId = `gradient-flow-${this.id}`;\n\n    rafController.register(this.animationId, () => {\n      const flowSpeed = this.config.get('flowSpeed') ?? 0.5;\n      this.gradientOffset += flowSpeed;\n\n      if (this.bar) {\n        this.bar.style.backgroundPosition = `${this.gradientOffset}% 0`;\n      }\n    }, 0);\n  }\n\n  /**\n   * 停止动画\n   */\n  private stopAnimation(): void {\n    if (this.animationId) {\n      const { rafController } = require('../utils/RAFController');\n      rafController.unregister(this.animationId);\n      this.animationId = undefined;\n    }\n  }\n\n  protected updateProgress(value: number): void {\n    const percentage = this.config.getPercentage(value);\n\n    if (this.bar) {\n      this.bar.style.width = `${percentage}%`;\n    }\n\n    if (this.textElement) {\n      this.textElement.textContent = this.formatText(value);\n    }\n  }\n\n  /**\n   * 销毁\n   */\n  destroy(): void {\n    this.stopAnimation();\n    super.destroy();\n  }\n}\n\n\n\n"],"names":[],"mappings":"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"}