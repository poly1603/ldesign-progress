{"version":3,"file":"ConfigManager.cjs","sources":["../../src/utils/ConfigManager.ts"],"sourcesContent":["import { BaseProgressOptions } from '../types';\r\n\r\n/**\r\n * 配置管理器\r\n */\r\nexport class ConfigManager<T extends BaseProgressOptions> {\r\n  private config: T;\r\n  private defaultConfig: Partial<T>;\r\n\r\n  constructor(defaultConfig: Partial<T>) {\r\n    this.defaultConfig = defaultConfig;\r\n    this.config = { ...defaultConfig } as T;\r\n  }\r\n\r\n  /**\r\n   * 获取配置\r\n   */\r\n  get<K extends keyof T>(key: K): T[K] {\r\n    return this.config[key];\r\n  }\r\n\r\n  /**\r\n   * 设置配置\r\n   */\r\n  set<K extends keyof T>(key: K, value: T[K]): void {\r\n    this.config[key] = value;\r\n  }\r\n\r\n  /**\r\n   * 批量设置配置\r\n   */\r\n  setMultiple(options: Partial<T>): void {\r\n    Object.assign(this.config, options);\r\n  }\r\n\r\n  /**\r\n   * 获取所有配置\r\n   */\r\n  getAll(): T {\r\n    return { ...this.config };\r\n  }\r\n\r\n  /**\r\n   * 重置为默认配置\r\n   */\r\n  reset(): void {\r\n    this.config = { ...this.defaultConfig } as T;\r\n  }\r\n\r\n  /**\r\n   * 合并配置\r\n   */\r\n  merge(options: Partial<T>): T {\r\n    return { ...this.config, ...options };\r\n  }\r\n\r\n  /**\r\n   * 验证配置值\r\n   */\r\n  validate(): boolean {\r\n    const value = this.config.value ?? 0;\r\n    const min = this.config.min ?? 0;\r\n    const max = this.config.max ?? 100;\r\n\r\n    return value >= min && value <= max && min < max;\r\n  }\r\n\r\n  /**\r\n   * 标准化值（确保在min-max范围内）\r\n   */\r\n  normalizeValue(value: number): number {\r\n    const min = this.config.min ?? 0;\r\n    const max = this.config.max ?? 100;\r\n    return Math.max(min, Math.min(max, value));\r\n  }\r\n\r\n  /**\r\n   * 获取百分比值\r\n   */\r\n  getPercentage(value?: number): number {\r\n    const val = value ?? this.config.value ?? 0;\r\n    const min = this.config.min ?? 0;\r\n    const max = this.config.max ?? 100;\r\n    return ((val - min) / (max - min)) * 100;\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;AAKO,MAAM,aAAA,CAA6C;AAAA,EAIxD,YAAY,aAAA,EAA2B;AACrC,IAAA,IAAA,CAAK,aAAA,GAAgB,aAAA;AACrB,IAAA,IAAA,CAAK,MAAA,GAAS,EAAE,GAAG,aAAA,EAAc;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA,EAKA,IAAuB,GAAA,EAAc;AACnC,IAAA,OAAO,IAAA,CAAK,OAAO,GAAG,CAAA;AAAA,EACxB;AAAA;AAAA;AAAA;AAAA,EAKA,GAAA,CAAuB,KAAQ,KAAA,EAAmB;AAChD,IAAA,IAAA,CAAK,MAAA,CAAO,GAAG,CAAA,GAAI,KAAA;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKA,YAAY,OAAA,EAA2B;AACrC,IAAA,MAAA,CAAO,MAAA,CAAO,IAAA,CAAK,MAAA,EAAQ,OAAO,CAAA;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,MAAA,GAAY;AACV,IAAA,OAAO,EAAE,GAAG,IAAA,CAAK,MAAA,EAAO;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA,EAKA,KAAA,GAAc;AACZ,IAAA,IAAA,CAAK,MAAA,GAAS,EAAE,GAAG,IAAA,CAAK,aAAA,EAAc;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA,EAKA,MAAM,OAAA,EAAwB;AAC5B,IAAA,OAAO,EAAE,GAAG,IAAA,CAAK,MAAA,EAAQ,GAAG,OAAA,EAAQ;AAAA,EACtC;AAAA;AAAA;AAAA;AAAA,EAKA,QAAA,GAAoB;AAClB,IAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,MAAA,CAAO,KAAA,IAAS,CAAA;AACnC,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,MAAA,CAAO,GAAA,IAAO,CAAA;AAC/B,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,MAAA,CAAO,GAAA,IAAO,GAAA;AAE/B,IAAA,OAAO,KAAA,IAAS,GAAA,IAAO,KAAA,IAAS,GAAA,IAAO,GAAA,GAAM,GAAA;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe,KAAA,EAAuB;AACpC,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,MAAA,CAAO,GAAA,IAAO,CAAA;AAC/B,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,MAAA,CAAO,GAAA,IAAO,GAAA;AAC/B,IAAA,OAAO,KAAK,GAAA,CAAI,GAAA,EAAK,KAAK,GAAA,CAAI,GAAA,EAAK,KAAK,CAAC,CAAA;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA,EAKA,cAAc,KAAA,EAAwB;AACpC,IAAA,MAAM,GAAA,GAAM,KAAA,IAAS,IAAA,CAAK,MAAA,CAAO,KAAA,IAAS,CAAA;AAC1C,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,MAAA,CAAO,GAAA,IAAO,CAAA;AAC/B,IAAA,MAAM,GAAA,GAAM,IAAA,CAAK,MAAA,CAAO,GAAA,IAAO,GAAA;AAC/B,IAAA,OAAA,CAAS,GAAA,GAAM,GAAA,KAAQ,GAAA,GAAM,GAAA,CAAA,GAAQ,GAAA;AAAA,EACvC;AACF;;;;"}