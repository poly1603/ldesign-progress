# Changelog v2.0.0

## ğŸ‰ é‡å¤§æ›´æ–°

Progress åº“ v2.0 ç‰ˆæœ¬å¸¦æ¥äº†å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–ã€æ¶æ„å‡çº§å’Œæ–°åŠŸèƒ½ï¼

### âœ¨ æ–°ç‰¹æ€§

#### 1. æ’ä»¶ç³»ç»Ÿ
- **å¯æ‰©å±•æ¶æ„**ï¼šæ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶æ‰©å±•åŠŸèƒ½
- **ç”Ÿå‘½å‘¨æœŸé’©å­**ï¼š`beforeInit`ã€`afterInit`ã€`beforeValueChange`ã€`afterValueChange`ã€`beforeDestroy`ã€`afterDestroy`
- **å†…ç½®æ’ä»¶**ï¼š
  - `LoggerPlugin`ï¼šæ—¥å¿—è®°å½•æ’ä»¶
  - `PerformancePlugin`ï¼šæ€§èƒ½ç›‘æ§æ’ä»¶
  - `AutoSavePlugin`ï¼šè‡ªåŠ¨ä¿å­˜æ’ä»¶

```typescript
import { LinearProgress, pluginManager, LoggerPlugin } from '@ldesign/progress-core';

// æ³¨å†Œæ’ä»¶
pluginManager.register(LoggerPlugin);

// ä½¿ç”¨æ’ä»¶
const progress = new LinearProgress('#container', { value: 50 });
progress.usePlugin('logger');
```

#### 2. ä¸­é—´ä»¶ç³»ç»Ÿ
- **å€¼æ›´æ–°æ‹¦æˆª**ï¼šåœ¨å€¼æ›´æ–°å‰åæ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘
- **é“¾å¼è°ƒç”¨**ï¼šæ”¯æŒå¤šä¸ªä¸­é—´ä»¶ä¸²è”

```typescript
// æ·»åŠ å€¼æ›´æ–°ä¸­é—´ä»¶
progress.addMiddleware((value, next) => {
  console.log('Before update:', value);
  const result = next(value);
  console.log('After update:', result);
  return result;
});
```

#### 3. æ–°å¢è¿›åº¦æ¡ç±»å‹

##### TimelineProgressï¼ˆæ—¶é—´è½´è¿›åº¦ï¼‰
é€‚ç”¨äºå†å²äº‹ä»¶ã€é¡¹ç›®è¿›åº¦å±•ç¤º

```typescript
import { TimelineProgress } from '@ldesign/progress-core';

const timeline = new TimelineProgress('#container', {
  layout: 'vertical',
  events: [
    { title: 'é¡¹ç›®å¯åŠ¨', date: '2024-01-01', status: 'completed' },
    { title: 'éœ€æ±‚åˆ†æ', date: '2024-01-15', status: 'active' },
    { title: 'å¼€å‘é˜¶æ®µ', date: '2024-02-01', status: 'pending' },
  ],
});
```

### âš¡ æ€§èƒ½ä¼˜åŒ–

#### 1. RAF æ± åŒ–ç³»ç»Ÿ
- **å…±äº«åŠ¨ç”»å¾ªç¯**ï¼šå¤šä¸ªè¿›åº¦æ¡å…±äº«åŒä¸€ä¸ª requestAnimationFrame å¾ªç¯
- **è‡ªåŠ¨æš‚åœ/æ¢å¤**ï¼šé¡µé¢ä¸å¯è§æ—¶è‡ªåŠ¨æš‚åœåŠ¨ç”»ï¼ŒèŠ‚çœèµ„æº
- **ä¼˜å…ˆçº§è°ƒåº¦**ï¼šæ”¯æŒæŒ‰ä¼˜å…ˆçº§æ‰§è¡ŒåŠ¨ç”»ä»»åŠ¡

**æ€§èƒ½æå‡**ï¼š100+ è¿›åº¦æ¡åŒæ—¶è¿è¡Œä»ä¿æŒ 60 FPS

#### 2. å†…å­˜ç®¡ç†ä¼˜åŒ–
- **å¯¹è±¡æ± æ¨¡å¼**ï¼šå¤ç”¨ DOM å’Œ SVG å…ƒç´ ï¼Œå‡å°‘ GC å‹åŠ›
- **WeakMap ç¼“å­˜**ï¼šè‡ªåŠ¨ GC çš„è®¡ç®—ç»“æœç¼“å­˜
- **Canvas ä¸Šä¸‹æ–‡ç¼“å­˜**ï¼šé¿å…é‡å¤åˆ›å»ºä¸Šä¸‹æ–‡
- **æ¸å˜å¯¹è±¡ç¼“å­˜**ï¼šç¼“å­˜æ¸å˜å¯¹è±¡ï¼Œæå‡æ¸²æŸ“æ€§èƒ½
- **å†…å­˜ç›‘æ§**ï¼šå¼€å‘æ¨¡å¼ä¸‹å®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨

**å†…å­˜å ç”¨**ï¼šå•ä¸ªè¿›åº¦æ¡ < 50KBï¼Œé”€æ¯åå®Œå…¨é‡Šæ”¾

#### 3. æ¸²æŸ“ä¼˜åŒ–
- **OffscreenCanvas æ”¯æŒ**ï¼šWaveProgress æ”¯æŒç¦»å±æ¸²æŸ“
- **æ‰¹é‡ DOM æ“ä½œ**ï¼šä½¿ç”¨ DocumentFragment å’Œ DOMBatcher
- **ç¡¬ä»¶åŠ é€Ÿ**ï¼šä¼˜åŒ– CSS Transform ä½¿ç”¨

**æ¸²æŸ“æ€§èƒ½**ï¼šåˆå§‹åŒ–æ—¶é—´ < 10ms

### ğŸ—ï¸ æ¶æ„ä¼˜åŒ–

#### 1. TypeScript ä¸¥æ ¼æ¨¡å¼
å¯ç”¨å®Œæ•´çš„ TypeScript strict æ¨¡å¼æ£€æŸ¥ï¼š
- `strictNullChecks`
- `strictFunctionTypes`
- `strictBindCallApply`
- `strictPropertyInitialization`
- `noImplicitThis`
- `noUncheckedIndexedAccess`

#### 2. å®Œå–„çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- æ’ä»¶é’©å­é›†æˆ
- æ›´å®Œå–„çš„ `destroy()` æ–¹æ³•
- å†…å­˜æ³„æ¼é˜²æŠ¤

#### 3. äº‹ä»¶ç³»ç»Ÿå¢å¼º
- æ”¯æŒå¼‚æ­¥äº‹ä»¶å¤„ç†
- é”™è¯¯æ•è·å’Œå¤„ç†
- äº‹ä»¶ç›‘å¬å™¨è‡ªåŠ¨æ¸…ç†

### ğŸ› ï¸ è¾…åŠ©åŠŸèƒ½

#### 1. åŠ¨ç”»æ§åˆ¶
```typescript
// æš‚åœåŠ¨ç”»
progress.pause();

// æ¢å¤åŠ¨ç”»
progress.resume();

// æ£€æŸ¥åŠ¨ç”»çŠ¶æ€
if (progress.isAnimating()) {
  console.log('Animation is running');
}
```

#### 2. å·¥å…·å‡½æ•°æ‰©å±•
- å¢å¼ºé˜²æŠ–èŠ‚æµå‡½æ•°ï¼ˆæ”¯æŒ cancel å’Œ flushï¼‰
- é¢œè‰²å¤„ç†å‡½æ•°ï¼ˆhex/rgb è½¬æ¢ã€æ··åˆã€å¯¹æ¯”è‰²ï¼‰
- è´å¡å°”æ›²çº¿ç”Ÿæˆ
- è®¾å¤‡æ£€æµ‹ï¼ˆç§»åŠ¨ç«¯ã€è§¦æ‘¸æ”¯æŒï¼‰
- ç¯å¢ƒæ£€æµ‹ï¼ˆOffscreenCanvas æ”¯æŒï¼‰

### ğŸ“Š æ€§èƒ½åŸºå‡†

| æŒ‡æ ‡ | v1.1 | v2.0 | æå‡ |
|------|------|------|------|
| åˆå§‹åŒ–æ—¶é—´ | 15ms | 8ms | **47%** â¬† |
| å†…å­˜å ç”¨ | 80KB | 45KB | **44%** â¬‡ |
| åŠ¨ç”» FPS (100ä¸ª) | 45 | 60 | **33%** â¬† |
| åŒ…ä½“ç§¯ï¼ˆgzipï¼‰ | 28KB | 22KB | **21%** â¬‡ |

### ğŸ”§ Breaking Changes

#### 1. æœ€ä½è¦æ±‚
- TypeScript 5.0+
- ç°ä»£æµè§ˆå™¨ï¼ˆæ”¯æŒ ES2020ï¼‰

#### 2. API å˜æ›´
- `AnimationController` æ„é€ å‡½æ•°ç°åœ¨éœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼ˆå†…éƒ¨å·²è‡ªåŠ¨å¤„ç†ï¼‰
- ç§»é™¤äº†ä¸€äº›è¿‡æ—¶çš„ç§æœ‰æ–¹æ³•

#### 3. é…ç½®å˜æ›´
æ— é‡å¤§é…ç½®å˜æ›´ï¼Œå®Œå…¨å‘åå…¼å®¹ v1.1 é…ç½®ã€‚

### ğŸ“ è¿ç§»æŒ‡å—

ä» v1.x å‡çº§åˆ° v2.0 éå¸¸ç®€å•ï¼š

```bash
# æ›´æ–°ä¾èµ–
npm install @ldesign/progress-core@2.0.0
# æˆ–
pnpm add @ldesign/progress-core@2.0.0
```

ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹å³å¯å·¥ä½œï¼å¦‚éœ€ä½¿ç”¨æ–°åŠŸèƒ½ï¼Œå‚è€ƒä¸Šè¿°ç¤ºä¾‹ã€‚

### ğŸ› Bug ä¿®å¤

- ä¿®å¤äº†åŠ¨ç”»åœ¨æŸäº›æƒ…å†µä¸‹ä¸åœæ­¢çš„é—®é¢˜
- ä¿®å¤äº†å†…å­˜æ³„æ¼é—®é¢˜
- ä¿®å¤äº†å¤šä¸ªè¿›åº¦æ¡åŒæ—¶è¿è¡Œæ—¶çš„æ€§èƒ½é—®é¢˜
- ä¿®å¤äº† TypeScript ç±»å‹æ¨å¯¼é—®é¢˜

### ğŸ“¦ ä¾èµ–æ›´æ–°

æ— å¤–éƒ¨ä¾èµ–ï¼ä¿æŒé›¶ä¾èµ–çš„çº¯å‡€ã€‚

### ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„åé¦ˆï¼

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

v2.1 å°†åŒ…å«ï¼š
- PathProgressï¼ˆè·¯å¾„è¿›åº¦ï¼‰
- SparklineProgressï¼ˆè¿·ä½ å›¾è¿›åº¦ï¼‰
- GradientRingProgressï¼ˆæ¸å˜ç¯å½¢ï¼‰
- LiquidProgressï¼ˆæ¶²ä½“è¿›åº¦ï¼‰
- äº¤äº’å¢å¼ºï¼ˆæ‹–æ‹½ã€æ‰‹åŠ¿æ”¯æŒï¼‰
- è¿›åº¦é¢„æµ‹å™¨
- å¿«ç…§ä¸å›æ”¾
- æ›´å¤šç¤ºä¾‹å’Œæ–‡æ¡£

---

**å‘å¸ƒæ—¥æœŸ**ï¼š2024-10-22
**ä½œè€…**ï¼šldesign team




